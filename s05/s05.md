% Compiler Construction 2016, Series 5
% Christoph Rackwitz (282245), Wanja Hentze (335148),
% Maximilian Schander (331410), Jonathan Neusch√§fer (334424)

## Exercise 1

Suppose a language L is non prefix-free and generated by a grammar G.
Then, there exist $v,w \in \Sigma^*, a \in \Sigma$ such that $v \in L$ and $vaw \in L$.

Consider an accepting run of the LR(0) parsing automaton on v.
After reading $v$, the automaton will have an empty pushdown in this run, since $v \in L$.
However, since the automaton must also accept $v \cdot aw$, there exists a run where the automaton reads $v$
and has a nonempty pushdown, because it now has to read a.
These two runs can not be the same, so the automaton is nondeterministic.
According to Theorem 9.10, $G \notin LR(0)$.

## Exercise 2

###a)

$$\begin{aligned}
S' &\rightarrow S \\
S &\rightarrow  P ~|~ Q \\
P &\rightarrow aP ~|~ c \\
Q &\rightarrow aQ ~|~ b
\end{aligned}$$

This grammar is not in LL(1) because $la(S \rightarrow P \rightarrow aP) \cap la(S \rightarrow 	Q \rightarrow aQ) \neq \emptyset$.

It is however an LR(0) grammar as it is prefix free and the LR(0) sets contain no conflicts:
$$
\begin{aligned}
I_0    &:= LR(0)(\varepsilon): &&
		[ S' \rightarrow \cdot S]~[S \rightarrow \cdot P]
		~[S \rightarrow \cdot C]~[ P \rightarrow \cdot aP]
		~[P \rightarrow \cdot b]~[Q \rightarrow \cdot aQ]
		~[Q \rightarrow \cdot c] \\
I_1    &:= LR(0)(S): &&
		[ S' \rightarrow S \cdot] \\
I_2    &:= LR(0)(P): &&
		[ S \rightarrow P \cdot ] \\
I_3    &:= LR(0)(P): &&
		[ S \rightarrow Q \cdot ] \\
I_4    &:= LR(0)(a): &&
		[ P \rightarrow a \cdot P ]~[Q \rightarrow a \cdot Q]
		~[P \rightarrow \cdot aP]~[ P \rightarrow \cdot b]
		~[Q \rightarrow \cdot aQ]~[Q \rightarrow \cdot c] \\
I_5    &:= LR(0)(b): &&
		[ P \rightarrow b \cdot  ] \\
I_6    &:= LR(0)(c): &&
		[ P \rightarrow c \cdot ] \\
I_7    &:= LR(0)(aP): &&
		[ P \rightarrow aP \cdot  ] \\
I_8    &:= LR(0)(aQ): &&
		[ Q \rightarrow aQ \cdot  ] \\
\end{aligned}
$$

###b)

Let L := $\{a, aa\}$.

L is finite and therefore regular.

However, $a$ is a proper prefix of $aa$, therefore L is not prefix-free
and therefore there is no LR(0) grammar for L.

\pagebreak

## Exercise 3
###a)

###b)

G is SLR(1). This is the parsing table corresponding to its SLR(1)-automaton:

r means reduce

s means shift

| State | $b_1$                          | $b_2$                          | $b_3$                          | $a_2$ | $a_3$ | $a_1$ | \$                          | S | $A_1$ | $A_2$ | $A_3$ |
|-------|--------------------------------|--------------------------------|--------------------------------|-------|-------|-------|-----------------------------|---|-------|-------|-------|
| 0     |                                |                                |                                |       |       |       |                             | 1 | 2     | 3     | 4     |
| 1     |                                |                                |                                |       |       |       | accept                      |   |       |       |       |
| 2     | s(8)                           |                                |                                |       |       |       |                             |   |       |       |       |
| 3     |                                | s(9)                           |                                |       |       |       |                             |   |       |       |       |
| 4     |                                |                                | s(10)                          |       |       |       |                             |   |       |       |       |
| 5     | r($A_1 \rightarrow a_2$)       |                                |                                | s(5)  | s(13) | s(14) |                             |   | 11    |       | 12    |
| 6     | r($A_1 \rightarrow a_3$)       | r($A_2 \rightarrow a_3$)       |                                | s(17) | s(6)  | s(18) |                             |   | 15    | 16    |       |
| 7     |                                | r($A_2 \rightarrow a_1$)       | r($A_3 \rightarrow a_1$)       | s(22) | s(21) | s(7)  |                             |   |       | 19    | 20    |
| 8     |                                |                                |                                |       |       |       | r($S \rightarrow A_1 b_1$)  |   |       |       |       |
| 9     |                                |                                |                                |       |       |       | r($S \rightarrow A_2 b_2$)  |   |       |       |       |
| 10    |                                |                                |                                |       |       |       | r($S \rightarrow A_3 b_3$)  |   |       |       |       |
| 11    | r($A_1 \rightarrow a_2 A_1$)   |                                |                                |       |       |       |                             |   |       |       |       |
| 12    |                                |                                | r($A_3 \rightarrow a_2 A_3$)   |       |       |       |                             |   |       |       |       |
| 13    | r($A_1 \rightarrow a_3$)       |                                |                                | s(17) | s(13) |       |                             |   | 15    |       |       |
| 14    |                                |                                | r($A_3 \rightarrow a_1$)       | s(22) |       | s(14) |                             |   |       |       | 20    |
| 15    | r($A_1 \rightarrow a_3 A_1$)   |                                |                                |       |       |       |                             |   |       |       |       |
| 16    |                                | r($A_2 \rightarrow a_3 A_2$)   |                                |       |       |       |                             |   |       |       |       |
| 17    | r($A_1 \rightarrow a_2$)       |                                |                                | s(17) | s(13) |       |                             |   | 11    |       |       |
| 18    |                                | r($A_2 \rightarrow a_1$)       |                                |       | s(21) | s(18) |                             |   |       | 19    |       |
| 19    |                                | r($A_2 \rightarrow a_1 A_2$)   |                                |       |       |       |                             |   |       |       |       |
| 20    |                                |                                | r($A_3 \rightarrow a_1 A_3$)   |       |       |       |                             |   |       |       |       |
| 21    |                                | r($A_2 \rightarrow a_3$)       |                                |       | s(21) | s(18) |                             |   |       | 16    |       |
| 22    |                                |                                | r($A_3 \rightarrow a_2$)       | s(22) |       | s(14) |                             |   |       |       | 12    |


\pagebreak

## Exercise 4

### a)

Lookahead sets of G:

$$\begin{aligned}
I_0    &:= LR(0)(\varepsilon): &&
		[ S' \rightarrow \cdot S]~[S \rightarrow \cdot ( S \land S )]
		~[S \rightarrow \cdot \lnot S]~[ S \rightarrow \cdot true]~[S \rightarrow \cdot false] \\
I_1    &:= LR(0)(S): &&
		[ S' \rightarrow S \cdot] \\
I_2    &:= LR(0)(\texttt{(}): &&
		[ S \rightarrow ( \cdot S \land S ) ]~[S \rightarrow \cdot ( S \land S )]
		~[S \rightarrow \cdot \lnot S]~[ S \rightarrow \cdot true]~[S \rightarrow \cdot false] \\
I_3    &:= LR(0)(\texttt{(S}): &&
		[ S \rightarrow ( S \cdot \land S ) ] \\
I_4    &:= LR(0)(\texttt{(S} \land): &&
		[ S \rightarrow ( S \land \cdot S ) ]~[S \rightarrow \cdot ( S \land S )]
		~[S \rightarrow \cdot \lnot S]~[ S \rightarrow \cdot true]~[S \rightarrow \cdot false] \\
I_5    &:= LR(0)(\texttt{(S} \land \texttt{S}): &&
		[ S \rightarrow ( S \land S \cdot ) ] \\
I_6    &:= LR(0)(\texttt{(S} \land \texttt{S)}): &&
		[ S \rightarrow ( S \land S ) \cdot ] \\
I_7    &:= LR(0)(\lnot): &&
		[ S \rightarrow \lnot \cdot S ]~[S \rightarrow \cdot ( S \land S )]~
		[S \rightarrow \cdot \lnot S]~[ S \rightarrow \cdot true]~[S \rightarrow \cdot false] \\
I_8    &:= LR(0)(\lnot S): &&
		[ S \rightarrow \lnot S \cdot ] \\
I_9    &:= LR(0)(true ): &&
		[ S \rightarrow true  \cdot ] \\
I_{10} &:= LR(0)(false): &&
		[ S \rightarrow false \cdot ] \\
\end{aligned}$$

$$
\begin{aligned}
	& LR(0)(\texttt{((})      ~ &=& ~ LR(0)(\texttt{(S} \land \texttt{(}) ~ &=& ~ LR(\lnot \texttt{(}) ~ &=& ~ LR(0)(\texttt{(}) ~ &=& ~ I_2 \\
	& LR(0)(\texttt{(} \lnot) ~ &=& ~ LR(0)(\texttt{(S} \land \lnot)      ~ &=& ~ LR(\lnot \not)       ~ &=& ~ LR(0)(\lnot)      ~ &=& ~ I_7 \\
	& LR(0)(\texttt{(} true)  ~ &=& ~ LR(0)(\texttt{(S} \land true)       ~ &=& ~ LR(\lnot true)       ~ &=& ~ LR(0)(true)       ~ &=& ~ I_9 \\
	& LR(0)(\texttt{(} false) ~ &=& ~ LR(0)(\texttt{(S} \land false)      ~ &=& ~ LR(\lnot false)      ~ &=& ~ LR(0)(false)      ~ &=& ~ I_{10} \\
\end{aligned}
$$

No conflicts.

\pagebreak

### b)

$$\begin{aligned}
	S' &\rightarrow S && (1) \\
	S  &\rightarrow (S \land S) ~|~ \lnot S ~|~ true ~|~ false && (2,3,4,5) \\
\end{aligned}$$


| LR(0)(G)  | act    |          |        | goto           |        |        |        |           |
| --------- | ------ | -------- | ------ | -------------- | ------ | ------ | ------ | --------- |
|           |        | S        | (      | $\land$        | )      | $\lnot$ | true   | false     |
| $I_0$     | shift  | $I_1$    | $I_2$  |                |        | $I_7$  | $I_9$  | $I_{10}$  |
| $I_1$     | accept |          |        |                |        |        |        |           |
| $I_2$     | shift  | $I_3$    | $I_2$  |                |        | $I_7$  | $I_9$  | $I_{10}$  |
| $I_3$     | shift  |          |        | $I_4$          |        |        |        |           |
| $I_4$     | shift  | $I_5$    | $I_2$  |                |        | $I_7$  | $I_9$  | $I_{10}$  |
| $I_5$     | shift  |          |        |                | $I_6$  |        |        |           |
| $I_6$     | red 2  |          |        |                |        |        |        |           |
| $I_7$     | shift  | $I_8$    | $I_2$  |                |        | $I_7$  | $I_9$  | $I_{10}$  |
| $I_8$     | red 3  |          |        |                |        |        |        |           |
| $I_9$     | red 4  |          |        |                |        |        |        |           |
| $I_{10}$  | red 5  |          |        |                |        |        |        |           |


### c)

| Input                                        | Stack                           | Derivation    |
| -------------------------------------------- | ------------------------------- |-------------- |
| $$ ((\lnot true \land false) \land false) $$ | $$I_0$$                         | $\varepsilon$ |
| $$ (\lnot true \land false) \land false) $$  | $$I_0,I_2$$                     | $\varepsilon$ |
| $$ \lnot true \land false) \land false) $$   | $$I_0,I_2,I_2$$                 | $\varepsilon$ |
| $$ true \land false) \land false) $$         | $$I_0,I_2,I_2,I_7$$             | $\varepsilon$ |
| $$ \land false) \land false) $$              | $$I_0,I_2,I_2,I_7,I_9$$         | $\varepsilon$ |
| $$ \land false) \land false) $$              | $$I_0,I_2,I_2,I_7,I_8$$         | 4             |
| $$ \land false) \land false) $$              | $$I_0,I_2,I_2,I_3$$             | 43            |
| $$ false) \land false) $$                    | $$I_0,I_2,I_2,I_3,I_4$$         | 43            |
| $$ ) \land false) $$                         | $$I_0,I_2,I_2,I_3,I_4,I_{10}$$  | 43            |
| $$ ) \land false) $$                         | $$I_0,I_2,I_2,I_3,I_4,I_5$$     | 435           |
| $$ \land false) $$                           | $$I_0,I_2,I_2,I_3,I_5,I_5,I_6$$ | 435           |
| $$ \land false) $$                           | $$I_0,I_2,I_3$$                 | 4352          |
| $$ false) $$                                 | $$I_0,I_2,I_3,I_4$$             | 4352          |
| $$ ) $$                                      | $$I_0,I_2,I_3,I_4,I_{10}$$      | 4352          |
| $$ ) $$                                      | $$I_0,I_2,I_3,I_4,I_5$$         | 43525         |
| $$ \varepsilon $$                            | $$I_0,I_2,I_3,I_4,I_5,I_6$$     | 43525         |
| $$ \varepsilon $$                            | $$I_0,I_1$$                     | 435252        |
| $$ \varepsilon $$                            | $$\varepsilon$$                 | 4352520       | 
